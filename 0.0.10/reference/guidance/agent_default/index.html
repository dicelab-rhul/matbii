
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://dicelab-rhul.github.io/matbii/0.0.10/reference/guidance/agent_default/">
      
      
        <link rel="prev" href="../agent_base/">
      
      
        <link rel="next" href="../sensor_guidance/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>Agent default - matbii</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#matbii.guidance.agent_default" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="matbii" class="md-header__button md-logo" aria-label="matbii" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            matbii
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Agent default
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../getting_started/" class="md-tabs__link">
          
  
    
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../advanced/" class="md-tabs__link">
          
  
    
  
  Advanced

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../../" class="md-tabs__link">
        
  
    
  
  Reference

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="matbii" class="md-nav__button md-logo" aria-label="matbii" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    matbii
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../getting_started/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/key-concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Key Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/post-analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Post analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../getting_started/devices/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Devices
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Devices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/devices/mouse_keyboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mouse & keyboard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/devices/eye_tracking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eye tracking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/devices/window_ui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Window & UI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../advanced/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/custom_entry_points/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Entry Points
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/custom_tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/custom_devices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Devices
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Main
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../avatar/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Avatar
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Avatar
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../avatar/exit_actuator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exit actuator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../extras/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Extras
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Extras
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../extras/analysis/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Analysis
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6_2" id="__nav_4_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_2">
            <span class="md-nav__icon md-icon"></span>
            Analysis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/analysis/get_guidance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get guidance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/analysis/get_task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get task
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Guidance
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Guidance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agent_base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agent base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Agent default
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Agent default
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default" class="md-nav__link">
    <span class="md-ellipsis">
      agent_default
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator" class="md-nav__link">
    <span class="md-ellipsis">
      ArrowGuidanceActuator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ArrowGuidanceActuator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.draw_guidance_arrow" class="md-nav__link">
    <span class="md-ellipsis">
      draw_guidance_arrow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.hide_guidance" class="md-nav__link">
    <span class="md-ellipsis">
      hide_guidance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.set_gaze_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_gaze_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.set_mouse_motion" class="md-nav__link">
    <span class="md-ellipsis">
      set_mouse_motion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.show_guidance" class="md-nav__link">
    <span class="md-ellipsis">
      show_guidance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator" class="md-nav__link">
    <span class="md-ellipsis">
      BoxGuidanceActuator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BoxGuidanceActuator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator.draw_guidance_box_on_element" class="md-nav__link">
    <span class="md-ellipsis">
      draw_guidance_box_on_element
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator.hide_guidance" class="md-nav__link">
    <span class="md-ellipsis">
      hide_guidance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator.show_guidance" class="md-nav__link">
    <span class="md-ellipsis">
      show_guidance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent" class="md-nav__link">
    <span class="md-ellipsis">
      DefaultGuidanceAgent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DefaultGuidanceAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_fixation" class="md-nav__link">
    <span class="md-ellipsis">
      attending_task_fixation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_gaze" class="md-nav__link">
    <span class="md-ellipsis">
      attending_task_gaze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_mouse" class="md-nav__link">
    <span class="md-ellipsis">
      attending_task_mouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.break_tie" class="md-nav__link">
    <span class="md-ellipsis">
      break_tie
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.get_attending_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      get_attending_tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.grace_period_over" class="md-nav__link">
    <span class="md-ellipsis">
      grace_period_over
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.on_attending" class="md-nav__link">
    <span class="md-ellipsis">
      on_attending
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.time_since_last_attended" class="md-nav__link">
    <span class="md-ellipsis">
      time_since_last_attended
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sensor_guidance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sensor guidance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sensor_resource_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sensor resource management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sensor_system_monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sensor system monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sensor_tracking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sensor tracking
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tasks/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_8_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tasks/resource_management/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Resource management
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8_1" id="__nav_4_8_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_1">
            <span class="md-nav__icon md-icon"></span>
            Resource management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/resource_management/resource_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_8_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tasks/system_monitoring/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    System monitoring
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8_2" id="__nav_4_8_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_2">
            <span class="md-nav__icon md-icon"></span>
            System monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/system_monitoring/system_monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System monitoring
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_8_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tasks/tracking/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tracking
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8_3" id="__nav_4_8_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_3">
            <span class="md-nav__icon md-icon"></span>
            Tracking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/tracking/tracking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tracking
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default" class="md-nav__link">
    <span class="md-ellipsis">
      agent_default
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator" class="md-nav__link">
    <span class="md-ellipsis">
      ArrowGuidanceActuator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ArrowGuidanceActuator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.draw_guidance_arrow" class="md-nav__link">
    <span class="md-ellipsis">
      draw_guidance_arrow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.hide_guidance" class="md-nav__link">
    <span class="md-ellipsis">
      hide_guidance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.set_gaze_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_gaze_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.set_mouse_motion" class="md-nav__link">
    <span class="md-ellipsis">
      set_mouse_motion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.show_guidance" class="md-nav__link">
    <span class="md-ellipsis">
      show_guidance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator" class="md-nav__link">
    <span class="md-ellipsis">
      BoxGuidanceActuator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BoxGuidanceActuator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator.draw_guidance_box_on_element" class="md-nav__link">
    <span class="md-ellipsis">
      draw_guidance_box_on_element
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator.hide_guidance" class="md-nav__link">
    <span class="md-ellipsis">
      hide_guidance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.BoxGuidanceActuator.show_guidance" class="md-nav__link">
    <span class="md-ellipsis">
      show_guidance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent" class="md-nav__link">
    <span class="md-ellipsis">
      DefaultGuidanceAgent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DefaultGuidanceAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_fixation" class="md-nav__link">
    <span class="md-ellipsis">
      attending_task_fixation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_gaze" class="md-nav__link">
    <span class="md-ellipsis">
      attending_task_gaze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_mouse" class="md-nav__link">
    <span class="md-ellipsis">
      attending_task_mouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.break_tie" class="md-nav__link">
    <span class="md-ellipsis">
      break_tie
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.get_attending_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      get_attending_tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.grace_period_over" class="md-nav__link">
    <span class="md-ellipsis">
      grace_period_over
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.on_attending" class="md-nav__link">
    <span class="md-ellipsis">
      on_attending
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.time_since_last_attended" class="md-nav__link">
    <span class="md-ellipsis">
      time_since_last_attended
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Agent default</h1>

<div class="doc doc-object doc-module">



<a id="matbii.guidance.agent_default"></a>
    <div class="doc doc-contents first">

      <p>Module contains a default implementation for a guidance agent, see <code>DefaultGuidanceAgent</code> documentation for details.</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="matbii.guidance.agent_default.ArrowGuidanceActuator" class="doc doc-heading">
            <code>ArrowGuidanceActuator</code>


<a href="#matbii.guidance.agent_default.ArrowGuidanceActuator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="icua.agent.actuator_guidance.GuidanceActuator">GuidanceActuator</span></code></p>


      <p>A concrete implementation of <code>GuidanceActuator</code> that implements a guidance arrow.</p>
<p>The arrow can be displayed in three different ways depending on the value of <code>arrow_mode</code>:
- "gaze" will display the arrow at the users gaze position, offset by <code>arrow_offset</code>.
- "mouse" will display the arrow at the users mouse position, offset by <code>arrow_offset</code>.
- "fixed" will display the arrow at a fixed position on the screen, this position is specified by <code>arrow_offset</code>.</p>

              <details class="quote">
                <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ArrowGuidanceActuator</span><span class="p">(</span><span class="n">GuidanceActuator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A concrete implementation of `GuidanceActuator` that implements a guidance arrow.</span>

<span class="sd">    The arrow can be displayed in three different ways depending on the value of `arrow_mode`:</span>
<span class="sd">    - &quot;gaze&quot; will display the arrow at the users gaze position, offset by `arrow_offset`.</span>
<span class="sd">    - &quot;mouse&quot; will display the arrow at the users mouse position, offset by `arrow_offset`.</span>
<span class="sd">    - &quot;fixed&quot; will display the arrow at a fixed position on the screen, this position is specified by `arrow_offset`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ARROW_MODES</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;gaze&quot;</span><span class="p">,</span> <span class="s2">&quot;mouse&quot;</span><span class="p">,</span> <span class="s2">&quot;fixed&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">arrow_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;gaze&quot;</span><span class="p">,</span> <span class="s2">&quot;mouse&quot;</span><span class="p">,</span> <span class="s2">&quot;fixed&quot;</span><span class="p">],</span>
        <span class="n">arrow_scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">arrow_fill_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
        <span class="n">arrow_stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
        <span class="n">arrow_stroke_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">,</span>
        <span class="n">arrow_offset</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            arrow_mode (Literal[&quot;gaze&quot;, &quot;mouse&quot;, &quot;fixed&quot;]): modes for arrow display.</span>
<span class="sd">            arrow_scale (float, optional): scale of the arrow. Defaults to 1.0.</span>
<span class="sd">            arrow_fill_color (str, optional): fill colour of the arrow. Defaults to &quot;none&quot;.</span>
<span class="sd">            arrow_stroke_color (str, optional): line colour of the arrow outline. Defaults to &quot;#ff0000&quot;.</span>
<span class="sd">            arrow_stroke_width (float, optional): line width of the arrow outline. Defaults to 4.0.</span>
<span class="sd">            arrow_offset (tuple[float, float], optional): offset of the arrow from its set position. This is the position used if `arrow_mode == &quot;fixed&quot;. Defaults to (80, 80).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_mode</span> <span class="o">=</span> <span class="n">arrow_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_scale</span> <span class="o">=</span> <span class="n">arrow_scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_fill_color</span> <span class="o">=</span> <span class="n">arrow_fill_color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_stroke_color</span> <span class="o">=</span> <span class="n">arrow_stroke_color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_stroke_width</span> <span class="o">=</span> <span class="n">arrow_stroke_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_offset</span> <span class="o">=</span> <span class="n">arrow_offset</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ArrowGuidanceActuator</span><span class="o">.</span><span class="n">ARROW_MODES</span><span class="o">.</span><span class="n">__args__</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid argument: `arrow_mode` must be one of </span><span class="si">{</span><span class="n">ArrowGuidanceActuator</span><span class="o">.</span><span class="n">ARROW_MODES</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_arrow_id</span> <span class="o">=</span> <span class="s2">&quot;guidance_arrow&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gaze_position</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mouse_position</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__attempt__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># noqa</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_mode</span> <span class="o">==</span> <span class="s2">&quot;gaze&quot;</span><span class="p">:</span>
            <span class="c1"># eyetracking positions can be nan, dont update the position if they are?</span>
            <span class="k">if</span> <span class="n">isfinite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gaze_position</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">and</span> <span class="n">isfinite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gaze_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_guidance_arrow_id</span><span class="p">,</span>
                    <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gaze_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gaze_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">point_to</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">DrawArrowAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="s2">&quot;/svg:svg&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">attrs</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Ignoring NaN arrow position.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_mode</span> <span class="o">==</span> <span class="s2">&quot;mouse&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mouse_position</span><span class="p">:</span>
                <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_guidance_arrow_id</span><span class="p">,</span>
                    <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_mouse_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_mouse_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">point_to</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">DrawArrowAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="s2">&quot;/svg:svg&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">attrs</span><span class="p">)]</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_mode</span> <span class="o">==</span> <span class="s2">&quot;fixed&quot;</span><span class="p">:</span>
            <span class="c1"># TODO where should it be? the center of the screen?</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;TODO&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid argument: `arrow_mode` must be one of </span><span class="si">{</span><span class="n">ArrowGuidanceActuator</span><span class="o">.</span><span class="n">ARROW_MODES</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="nd">@attempt</span><span class="p">([</span><span class="n">EyeMotionEvent</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">set_gaze_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">EyeMotionEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the users current gaze position. This may be used as a position for arrow display.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gaze_position</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">position</span>

    <span class="nd">@attempt</span><span class="p">([</span><span class="n">MouseMotionEvent</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">set_mouse_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">MouseMotionEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the users current mouse position. This may be used as a position for arrow display.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mouse_position</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">position</span>

    <span class="k">def</span> <span class="nf">on_add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">:</span> <span class="n">Agent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">on_add</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_guidance_arrow</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_arrow_id</span><span class="p">,</span>
            <span class="mf">0.0</span><span class="p">,</span>
            <span class="mf">0.0</span><span class="p">,</span>
            <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_arrow_fill_color</span><span class="p">,</span>
            <span class="n">stroke_width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_arrow_stroke_width</span><span class="p">,</span>
            <span class="n">stroke_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_arrow_stroke_color</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_arrow_scale</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">:</span> <span class="n">Agent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">on_remove</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>
        <span class="c1"># TODO remove arrow element!</span>

    <span class="nd">@attempt</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">draw_guidance_arrow</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">rotation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="n">fill</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
        <span class="n">stroke_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DrawArrowAction</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Attempt method that takes an action to draw a guidance arrow.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): id.</span>
<span class="sd">            x (float): x position.</span>
<span class="sd">            y (float): y position.</span>
<span class="sd">            scale (float, optional): scale. Defaults to 1.0.</span>
<span class="sd">            rotation (float, optional): rotation. Defaults to 0.0.</span>
<span class="sd">            fill (str, optional): fill color. Defaults to &quot;none&quot;.</span>
<span class="sd">            opacity (float, optional): opacity (0.0 means hidden). Defaults to 0.0.</span>
<span class="sd">            stroke_color (str, optional): color of the arrow border. Defaults to &quot;#ff0000&quot;.</span>
<span class="sd">            stroke_width (float, optional): thickness of the arrow border. Defaults to 2.0.</span>
<span class="sd">            kwargs : (dict[str,Any]): additional optional keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DrawArrowAction: action</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DrawArrowAction</span><span class="p">(</span>
            <span class="n">xpath</span><span class="o">=</span><span class="s2">&quot;/svg:svg&quot;</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span>
                <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                <span class="n">stroke</span><span class="o">=</span><span class="n">stroke_color</span><span class="p">,</span>
                <span class="n">stroke_width</span><span class="o">=</span><span class="n">stroke_width</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

    <span class="nd">@attempt</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">show_guidance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Action</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show guidance on the given task.</span>

<span class="sd">        Args:</span>
<span class="sd">            task (str): task to show guidance for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[Action]: guidance actions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="n">task</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ShowElementAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_guidance_arrow_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">actions</span>

    <span class="nd">@attempt</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">hide_guidance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Action</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Hide guidance on the given task.</span>

<span class="sd">        Args:</span>
<span class="sd">            task (str): task to hide guidance for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[Action]: guidance actions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">HideElementAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_guidance_arrow_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">actions</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.ArrowGuidanceActuator.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">arrow_mode</span><span class="p">,</span> <span class="n">arrow_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">arrow_fill_color</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">arrow_stroke_color</span><span class="o">=</span><span class="s1">&#39;#ff0000&#39;</span><span class="p">,</span> <span class="n">arrow_stroke_width</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">arrow_offset</span><span class="o">=</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">))</span></code>

<a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Constructor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>arrow_mode</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;gaze&#39;, &#39;mouse&#39;, &#39;fixed&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>modes for arrow display.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>arrow_scale</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>scale of the arrow. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>arrow_fill_color</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>fill colour of the arrow. Defaults to "none".</p>
              </div>
            </td>
            <td>
                  <code>&#39;none&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>arrow_stroke_color</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>line colour of the arrow outline. Defaults to "#ff0000".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#ff0000&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>arrow_stroke_width</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>line width of the arrow outline. Defaults to 4.0.</p>
              </div>
            </td>
            <td>
                  <code>4.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>arrow_offset</code></td>
            <td>
                  <code>tuple[float, float]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>offset of the arrow from its set position. This is the position used if `arrow_mode == "fixed". Defaults to (80, 80).</p>
              </div>
            </td>
            <td>
                  <code>(80, 80)</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">arrow_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;gaze&quot;</span><span class="p">,</span> <span class="s2">&quot;mouse&quot;</span><span class="p">,</span> <span class="s2">&quot;fixed&quot;</span><span class="p">],</span>
    <span class="n">arrow_scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">arrow_fill_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
    <span class="n">arrow_stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
    <span class="n">arrow_stroke_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">,</span>
    <span class="n">arrow_offset</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">    Args:</span>
<span class="sd">        arrow_mode (Literal[&quot;gaze&quot;, &quot;mouse&quot;, &quot;fixed&quot;]): modes for arrow display.</span>
<span class="sd">        arrow_scale (float, optional): scale of the arrow. Defaults to 1.0.</span>
<span class="sd">        arrow_fill_color (str, optional): fill colour of the arrow. Defaults to &quot;none&quot;.</span>
<span class="sd">        arrow_stroke_color (str, optional): line colour of the arrow outline. Defaults to &quot;#ff0000&quot;.</span>
<span class="sd">        arrow_stroke_width (float, optional): line width of the arrow outline. Defaults to 4.0.</span>
<span class="sd">        arrow_offset (tuple[float, float], optional): offset of the arrow from its set position. This is the position used if `arrow_mode == &quot;fixed&quot;. Defaults to (80, 80).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_mode</span> <span class="o">=</span> <span class="n">arrow_mode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_scale</span> <span class="o">=</span> <span class="n">arrow_scale</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_fill_color</span> <span class="o">=</span> <span class="n">arrow_fill_color</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_stroke_color</span> <span class="o">=</span> <span class="n">arrow_stroke_color</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_stroke_width</span> <span class="o">=</span> <span class="n">arrow_stroke_width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_offset</span> <span class="o">=</span> <span class="n">arrow_offset</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ArrowGuidanceActuator</span><span class="o">.</span><span class="n">ARROW_MODES</span><span class="o">.</span><span class="n">__args__</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid argument: `arrow_mode` must be one of </span><span class="si">{</span><span class="n">ArrowGuidanceActuator</span><span class="o">.</span><span class="n">ARROW_MODES</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_arrow_id</span> <span class="o">=</span> <span class="s2">&quot;guidance_arrow&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_gaze_position</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_mouse_position</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.ArrowGuidanceActuator.draw_guidance_arrow" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">draw_guidance_arrow</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">stroke_color</span><span class="o">=</span><span class="s1">&#39;#ff0000&#39;</span><span class="p">,</span> <span class="n">stroke_width</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.draw_guidance_arrow" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Attempt method that takes an action to draw a guidance arrow.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>x</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>x position.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>y</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>y position.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>scale</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>scale. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>rotation</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>rotation. Defaults to 0.0.</p>
              </div>
            </td>
            <td>
                  <code>0.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>fill</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>fill color. Defaults to "none".</p>
              </div>
            </td>
            <td>
                  <code>&#39;none&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>opacity</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>opacity (0.0 means hidden). Defaults to 0.0.</p>
              </div>
            </td>
            <td>
                  <code>0.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>stroke_color</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>color of the arrow border. Defaults to "#ff0000".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#ff0000&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>stroke_width</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>thickness of the arrow border. Defaults to 2.0.</p>
              </div>
            </td>
            <td>
                  <code>2.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(dict[str,Any]): additional optional keyword arguments.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DrawArrowAction</code></td>            <td>
                  <code><span title="icua.event.DrawArrowAction">DrawArrowAction</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>action</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@attempt</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">draw_guidance_arrow</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">rotation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">fill</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
    <span class="n">stroke_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DrawArrowAction</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Attempt method that takes an action to draw a guidance arrow.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): id.</span>
<span class="sd">        x (float): x position.</span>
<span class="sd">        y (float): y position.</span>
<span class="sd">        scale (float, optional): scale. Defaults to 1.0.</span>
<span class="sd">        rotation (float, optional): rotation. Defaults to 0.0.</span>
<span class="sd">        fill (str, optional): fill color. Defaults to &quot;none&quot;.</span>
<span class="sd">        opacity (float, optional): opacity (0.0 means hidden). Defaults to 0.0.</span>
<span class="sd">        stroke_color (str, optional): color of the arrow border. Defaults to &quot;#ff0000&quot;.</span>
<span class="sd">        stroke_width (float, optional): thickness of the arrow border. Defaults to 2.0.</span>
<span class="sd">        kwargs : (dict[str,Any]): additional optional keyword arguments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        DrawArrowAction: action</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">DrawArrowAction</span><span class="p">(</span>
        <span class="n">xpath</span><span class="o">=</span><span class="s2">&quot;/svg:svg&quot;</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
            <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span>
            <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">stroke</span><span class="o">=</span><span class="n">stroke_color</span><span class="p">,</span>
            <span class="n">stroke_width</span><span class="o">=</span><span class="n">stroke_width</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.ArrowGuidanceActuator.hide_guidance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">hide_guidance</span><span class="p">(</span><span class="n">task</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.hide_guidance" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Hide guidance on the given task.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>task</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>task to hide guidance for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list[<span title="star_ray.event.Action">Action</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Action]: guidance actions</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@attempt</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">hide_guidance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Action</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hide guidance on the given task.</span>

<span class="sd">    Args:</span>
<span class="sd">        task (str): task to hide guidance for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Action]: guidance actions</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">HideElementAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_guidance_arrow_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">actions</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.ArrowGuidanceActuator.set_gaze_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_gaze_position</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.set_gaze_position" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Sets the users current gaze position. This may be used as a position for arrow display.</p>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@attempt</span><span class="p">([</span><span class="n">EyeMotionEvent</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">set_gaze_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">EyeMotionEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the users current gaze position. This may be used as a position for arrow display.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_gaze_position</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">position</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.ArrowGuidanceActuator.set_mouse_motion" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_mouse_motion</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.set_mouse_motion" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Sets the users current mouse position. This may be used as a position for arrow display.</p>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@attempt</span><span class="p">([</span><span class="n">MouseMotionEvent</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">set_mouse_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">MouseMotionEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the users current mouse position. This may be used as a position for arrow display.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_mouse_position</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">position</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.ArrowGuidanceActuator.show_guidance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_guidance</span><span class="p">(</span><span class="n">task</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.ArrowGuidanceActuator.show_guidance" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Show guidance on the given task.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>task</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>task to show guidance for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list[<span title="star_ray.event.Action">Action</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Action]: guidance actions</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@attempt</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">show_guidance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Action</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Show guidance on the given task.</span>

<span class="sd">    Args:</span>
<span class="sd">        task (str): task to show guidance for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Action]: guidance actions</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="n">task</span>
    <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ShowElementAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_guidance_arrow_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">actions</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="matbii.guidance.agent_default.BoxGuidanceActuator" class="doc doc-heading">
            <code>BoxGuidanceActuator</code>


<a href="#matbii.guidance.agent_default.BoxGuidanceActuator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="icua.agent.actuator_guidance.GuidanceActuator">GuidanceActuator</span></code></p>


      <p>A concrete implementation of <code>GuidanceActuator</code> that implements box guidance. The box bounds a given task element serving to highlight it to the user, typically the task will be one that is not in an acceptible state.</p>

              <details class="quote">
                <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BoxGuidanceActuator</span><span class="p">(</span><span class="n">GuidanceActuator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A concrete implementation of `GuidanceActuator` that implements box guidance. The box bounds a given task element serving to highlight it to the user, typically the task will be one that is not in an acceptible state.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">box_stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
        <span class="n">box_stroke_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            box_stroke_color (str, optional): color of the box. Defaults to &quot;#ff0000&quot;.</span>
<span class="sd">            box_stroke_width (float, optional): width of the box outline. Defaults to 4.0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_color</span> <span class="o">=</span> <span class="n">box_stroke_color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_width</span> <span class="o">=</span> <span class="n">box_stroke_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_box_id_template</span> <span class="o">=</span> <span class="s2">&quot;guidance_box_</span><span class="si">%s</span><span class="s2">&quot;</span>
        <span class="c1"># ids of each of the guidance boxes that have been created</span>
        <span class="c1"># TODO they should be removed when `on_remove` is called!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">:</span> <span class="n">Agent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">on_remove</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>  <span class="c1"># TODO remove all guidance boxes!</span>

    <span class="nd">@attempt</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">draw_guidance_box_on_element</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">element_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">box_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DrawBoxOnElementAction</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Attempt method that will draw a box around a given element.</span>

<span class="sd">        Args:</span>
<span class="sd">            element_id (str): the `id` of the element.</span>
<span class="sd">            box_data (dict[str,Any]): data associated with the box.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DrawBoxOnElementAction: action</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO explicit parameters for box data</span>
        <span class="n">box_data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_box_id_template</span> <span class="o">%</span> <span class="n">element_id</span>
        <span class="k">return</span> <span class="n">DrawBoxOnElementAction</span><span class="p">(</span>
            <span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="n">element_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">,</span> <span class="n">box_data</span><span class="o">=</span><span class="n">box_data</span>
        <span class="p">)</span>

    <span class="nd">@attempt</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">show_guidance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Action</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show guidance on the given task.</span>

<span class="sd">        Args:</span>
<span class="sd">            task (str): task to show guidance for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[Action]: guidance actions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="n">task</span>
        <span class="n">guidance_box_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_box_id_template</span> <span class="o">%</span> <span class="n">task</span>

        <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">guidance_box_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span><span class="p">:</span>
            <span class="c1"># first time! insert the guidance box</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">guidance_box_id</span><span class="p">)</span>
            <span class="n">box_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;stroke-width&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_width</span><span class="p">,</span>
                <span class="s2">&quot;stroke&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_color</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="c1"># draw the box but it is hidden (opacity=0)</span>
            <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_guidance_box_on_element</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">**</span><span class="n">box_data</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ShowElementAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="n">guidance_box_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">actions</span>

    <span class="nd">@attempt</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">hide_guidance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Hide guidance on the given task.</span>

<span class="sd">        Args:</span>
<span class="sd">            task (str): task to hide guidance for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[Action]: guidance actions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">guidance_box_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_box_id_template</span> <span class="o">%</span> <span class="n">task</span>

        <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">guidance_box_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span><span class="p">:</span>
            <span class="c1"># first time! insert the guidance box</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">guidance_box_id</span><span class="p">)</span>
            <span class="n">box_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;stroke-width&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_width</span><span class="p">,</span>
                <span class="s2">&quot;stroke&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_color</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="c1"># draw the box but it is hidden (opacity=0)</span>
            <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_guidance_box_on_element</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">**</span><span class="n">box_data</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">HideElementAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="n">guidance_box_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">actions</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.BoxGuidanceActuator.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">box_stroke_color</span><span class="o">=</span><span class="s1">&#39;#ff0000&#39;</span><span class="p">,</span> <span class="n">box_stroke_width</span><span class="o">=</span><span class="mf">4.0</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.BoxGuidanceActuator.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Constructor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>box_stroke_color</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>color of the box. Defaults to "#ff0000".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#ff0000&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>box_stroke_width</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>width of the box outline. Defaults to 4.0.</p>
              </div>
            </td>
            <td>
                  <code>4.0</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">box_stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
    <span class="n">box_stroke_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">    Args:</span>
<span class="sd">        box_stroke_color (str, optional): color of the box. Defaults to &quot;#ff0000&quot;.</span>
<span class="sd">        box_stroke_width (float, optional): width of the box outline. Defaults to 4.0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_color</span> <span class="o">=</span> <span class="n">box_stroke_color</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_width</span> <span class="o">=</span> <span class="n">box_stroke_width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_box_id_template</span> <span class="o">=</span> <span class="s2">&quot;guidance_box_</span><span class="si">%s</span><span class="s2">&quot;</span>
    <span class="c1"># ids of each of the guidance boxes that have been created</span>
    <span class="c1"># TODO they should be removed when `on_remove` is called!</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.BoxGuidanceActuator.draw_guidance_box_on_element" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">draw_guidance_box_on_element</span><span class="p">(</span><span class="n">element_id</span><span class="p">,</span> <span class="o">**</span><span class="n">box_data</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.BoxGuidanceActuator.draw_guidance_box_on_element" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Attempt method that will draw a box around a given element.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>element_id</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the <code>id</code> of the element.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>box_data</code></td>
            <td>
                  <code>dict[str, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>data associated with the box.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DrawBoxOnElementAction</code></td>            <td>
                  <code><span title="icua.event.DrawBoxOnElementAction">DrawBoxOnElementAction</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>action</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@attempt</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">draw_guidance_box_on_element</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">element_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">box_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DrawBoxOnElementAction</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Attempt method that will draw a box around a given element.</span>

<span class="sd">    Args:</span>
<span class="sd">        element_id (str): the `id` of the element.</span>
<span class="sd">        box_data (dict[str,Any]): data associated with the box.</span>

<span class="sd">    Returns:</span>
<span class="sd">        DrawBoxOnElementAction: action</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO explicit parameters for box data</span>
    <span class="n">box_data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_box_id_template</span> <span class="o">%</span> <span class="n">element_id</span>
    <span class="k">return</span> <span class="n">DrawBoxOnElementAction</span><span class="p">(</span>
        <span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="n">element_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">,</span> <span class="n">box_data</span><span class="o">=</span><span class="n">box_data</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.BoxGuidanceActuator.hide_guidance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">hide_guidance</span><span class="p">(</span><span class="n">task</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.BoxGuidanceActuator.hide_guidance" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Hide guidance on the given task.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>task</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>task to hide guidance for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Action]: guidance actions</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@attempt</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">hide_guidance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hide guidance on the given task.</span>

<span class="sd">    Args:</span>
<span class="sd">        task (str): task to hide guidance for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Action]: guidance actions</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">guidance_box_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_box_id_template</span> <span class="o">%</span> <span class="n">task</span>

    <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">guidance_box_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span><span class="p">:</span>
        <span class="c1"># first time! insert the guidance box</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">guidance_box_id</span><span class="p">)</span>
        <span class="n">box_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;stroke-width&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_width</span><span class="p">,</span>
            <span class="s2">&quot;stroke&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_color</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="c1"># draw the box but it is hidden (opacity=0)</span>
        <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_guidance_box_on_element</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">**</span><span class="n">box_data</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">HideElementAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="n">guidance_box_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">actions</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.BoxGuidanceActuator.show_guidance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_guidance</span><span class="p">(</span><span class="n">task</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.BoxGuidanceActuator.show_guidance" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Show guidance on the given task.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>task</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>task to show guidance for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list[<span title="star_ray.event.Action">Action</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Action]: guidance actions</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>icua\agent\actuator_guidance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@attempt</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">show_guidance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Action</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Show guidance on the given task.</span>

<span class="sd">    Args:</span>
<span class="sd">        task (str): task to show guidance for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Action]: guidance actions</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_on</span> <span class="o">=</span> <span class="n">task</span>
    <span class="n">guidance_box_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_box_id_template</span> <span class="o">%</span> <span class="n">task</span>

    <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">guidance_box_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span><span class="p">:</span>
        <span class="c1"># first time! insert the guidance box</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guidance_boxes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">guidance_box_id</span><span class="p">)</span>
        <span class="n">box_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;stroke-width&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_width</span><span class="p">,</span>
            <span class="s2">&quot;stroke&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_stroke_color</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="c1"># draw the box but it is hidden (opacity=0)</span>
        <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_guidance_box_on_element</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">**</span><span class="n">box_data</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ShowElementAction</span><span class="p">(</span><span class="n">xpath</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{</span><span class="n">guidance_box_id</span><span class="si">}</span><span class="s2">&#39;]&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">actions</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="matbii.guidance.agent_default.DefaultGuidanceAgent" class="doc doc-heading">
            <code>DefaultGuidanceAgent</code>


<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="matbii.guidance.agent_base.GuidanceAgent" href="../agent_base/#matbii.guidance.agent_base.GuidanceAgent">GuidanceAgent</a></code></p>


      <p>Default implementation of a guidance agent for the matbii system.</p>


<details class="show-guidance-if" open>
  <summary>Show guidance if</summary>
  <ol>
<li>there is no guidance already active.</li>
<li>the task is unacceptable.</li>
<li>the user is not already attending on the task.</li>
<li>the grace period has elapsed.</li>
</ol>
</details>
              <details class="quote">
                <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DefaultGuidanceAgent</span><span class="p">(</span><span class="n">GuidanceAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Default implementation of a guidance agent for the matbii system.</span>

<span class="sd">    Show guidance if:</span>
<span class="sd">        1. there is no guidance already active.</span>
<span class="sd">        2. the task is unacceptable.</span>
<span class="sd">        3. the user is not already attending on the task.</span>
<span class="sd">        4. the grace period has elapsed.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># used to break ties when multiple tasks could be highlighted. See `break_tie` method.</span>
    <span class="n">BREAK_TIES</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="s2">&quot;longest&quot;</span><span class="p">)</span>

    <span class="c1"># condition 4. - whether to track the time since the last failure, or since the last guidance was shown</span>
    <span class="n">GRACE_ON</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;guidance_task&quot;</span><span class="p">,</span> <span class="s2">&quot;guidance_any&quot;</span><span class="p">,</span> <span class="s2">&quot;failure&quot;</span><span class="p">,</span> <span class="s2">&quot;attention&quot;</span><span class="p">)</span>

    <span class="c1"># method to use to determine which task the user is attending to</span>
    <span class="n">ATTENTION_MODES</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;fixation&quot;</span><span class="p">,</span> <span class="s2">&quot;gaze&quot;</span><span class="p">,</span> <span class="s2">&quot;mouse&quot;</span><span class="p">)</span>

    <span class="c1"># if we havent had fresh eyetracking data for more than this, there may be something wrong... display a warning</span>
    <span class="n">MISSING_GAZE_DATA_THRESHOLD</span> <span class="o">=</span> <span class="mf">0.1</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sensors</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Sensor</span><span class="p">],</span>
        <span class="n">actuators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Actuator</span><span class="p">],</span>
        <span class="n">break_ties</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="s2">&quot;longest&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
        <span class="n">grace_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
            <span class="s2">&quot;guidance_task&quot;</span><span class="p">,</span> <span class="s2">&quot;guidance_any&quot;</span><span class="p">,</span> <span class="s2">&quot;failure&quot;</span><span class="p">,</span> <span class="s2">&quot;attention&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;failure&quot;</span><span class="p">,</span>
        <span class="n">attention_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;fixation&quot;</span><span class="p">,</span> <span class="s2">&quot;gaze&quot;</span><span class="p">,</span> <span class="s2">&quot;mouse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;fixation&quot;</span><span class="p">,</span>
        <span class="n">grace_period</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="n">counter_factual</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            sensors (list[Sensor]): list of sensors, this will typically be a list of `icua.agent.TaskAcceptabilitySensor`s. A `UserInputSensor` will always be added automatically.</span>
<span class="sd">            actuators (list[Actuator]): list of actuators, this will typically contain actuators that are capable of providing visual feedback to a user, see e.g. `icua.agent.GuidanceActuator` and its concrete implementations. A `CounterFactualGuidanceActuator` will be added by default.</span>
<span class="sd">            break_ties (Literal[&quot;random&quot;, &quot;longest&quot;, &quot;since&quot;], optional): how to break ties if guidance may be shown on multiple tasks simultaneously. Defaults to &quot;random&quot;. &quot;random&quot; will randomly break the tie, &quot;longest&quot; will choose the task that has been in failure for the longest, &quot;since&quot; will choose the task that has not had guidance shown for the longest time.</span>
<span class="sd">            grace_mode (Literal[&quot;guidance_task&quot;, &quot;guidance_any&quot;, &quot;failure&quot;, &quot;attention&quot;], optional): how to track the grace period. &quot;guidance_task&quot; will track the time since guidance was last shown on the task, &quot;guidance_any&quot; will track the time since guidance was last shown on any task, &quot;failure&quot; will track the time since the last failure on the task, &quot;attention&quot; will track the time since the user was last attending to a task. Defaults to &quot;failure&quot;.</span>
<span class="sd">            attention_mode (Literal[&quot;fixation&quot;, &quot;gaze&quot;, &quot;mouse&quot;], optional): method of determining where the user is attending. &quot;fixation&quot; will use the most recent gaze fixation, &quot;gaze&quot; will use the gaze position (including saccades), &quot;mouse&quot; will use the current mouse position. Defaults to &quot;fixation&quot;.</span>
<span class="sd">            grace_period (float, optional): the time to wait (seconds) before guidance may be shown for a task after the last time guidance was shown on the task. Defaults to 3.0 seconds.</span>
<span class="sd">            counter_factual (bool, optional): whether guidance should be shown to the user, or whether it should just be logged.  This allows counter-factual experiments to be run, we can track when guidance would have been shown, and compare the when it was actually shown (in a different run). Defaults to False.</span>
<span class="sd">            kwargs (dict[str,Any]): Additional optional keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)),</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">actuators</span><span class="p">)),</span>
            <span class="n">counter_factual</span><span class="o">=</span><span class="n">counter_factual</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="o">=</span> <span class="n">attention_mode</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">ATTENTION_MODES</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid argument: `attention_mode` </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span><span class="si">}</span><span class="s2"> must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">ATTENTION_MODES</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">=</span> <span class="n">grace_mode</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">GRACE_ON</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid argument: `grace_mode` </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span><span class="si">}</span><span class="s2"> must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">GRACE_ON</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_break_ties</span> <span class="o">=</span> <span class="n">break_ties</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_break_ties</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">BREAK_TIES</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid argument: `break_ties` </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_break_ties</span><span class="si">}</span><span class="s2"> must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">BREAK_TIES</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="o">=</span> <span class="n">grace_period</span>  <span class="c1"># TODO</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid argument: `grace_period` </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span><span class="si">}</span><span class="s2"> must be &gt; 0 &quot;</span>
            <span class="p">)</span>

        <span class="c1"># used to track the tasks that the user is currently attending to</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attending_tasks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_attending</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attending_tasks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called when the user&#39;s attention changes.</span>

<span class="sd">        Args:</span>
<span class="sd">            attending_tasks (set[str]): the new set of tasks that the user is currently attending to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">attending_tasks</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">beliefs</span><span class="p">[</span><span class="n">task</span><span class="p">][</span><span class="s2">&quot;last_attended&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cycle_start</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_log_info</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;attending&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attending_tasks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_log_info</span><span class="p">(</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="s2">&quot;attending&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">decide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># noqa</span>
        <span class="c1"># update when the user was last attending to a task</span>
        <span class="n">attending_tasks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attending_tasks</span><span class="p">()</span>  <span class="c1"># empty or a single task</span>
        <span class="k">if</span> <span class="n">attending_tasks</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attending_tasks</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_attending_tasks</span> <span class="o">=</span> <span class="n">attending_tasks</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">on_attending</span><span class="p">(</span><span class="n">attending_tasks</span><span class="p">)</span>

        <span class="c1"># make guidance decisions</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">guidance_on_tasks</span><span class="p">:</span>
            <span class="c1"># guidance is active, should it be?</span>
            <span class="n">guidance_and_acceptable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">guidance_on_tasks</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">acceptable_tasks</span>
            <span class="k">if</span> <span class="n">guidance_and_acceptable</span><span class="p">:</span>
                <span class="c1"># the task has guidance showing, but is now acceptable - hide guidance for this task</span>
                <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">guidance_and_acceptable</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">hide_guidance</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="n">guidance_and_attending</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">guidance_on_tasks</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attending_tasks</span>
            <span class="k">if</span> <span class="n">guidance_and_attending</span><span class="p">:</span>
                <span class="c1"># the task has guidance showing, but the user is attending to it - hide guidance for this task</span>
                <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">guidance_and_attending</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">hide_guidance</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="c1"># keep showing guidance</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># guidance is NOT active, should it be?</span>
            <span class="c1"># these tasks are candidates for showing guidance</span>
            <span class="n">unacceptable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unacceptable_tasks</span>
            <span class="c1"># remove those tasks that the user is currently attending</span>
            <span class="n">unacceptable</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attending_tasks</span>
            <span class="c1"># check the grace period</span>
            <span class="n">unacceptable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grace_period_over</span><span class="p">(</span><span class="n">unacceptable</span><span class="p">)</span>

            <span class="n">task</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">break_tie</span><span class="p">(</span><span class="n">unacceptable</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">task</span><span class="p">:</span>
                <span class="c1"># we have selected a task to show guidance on</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_guidance</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

            <span class="c1"># no task meets the criteria, the user is doing well!</span>

    <span class="k">def</span> <span class="nf">grace_period_over</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the set of (unacceptable) tasks that have had their grace period elapse.</span>

<span class="sd">        Args:</span>
<span class="sd">            tasks (set[str]): the set of tasks to check.</span>

<span class="sd">        Returns:</span>
<span class="sd">            set[str]: the set of tasks that have had their grace period elapse.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">==</span> <span class="s2">&quot;guidance_task&quot;</span><span class="p">:</span>
            <span class="c1"># how long since guidance was last shown on the task?</span>
            <span class="k">def</span> <span class="nf">_grace_met</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
                <span class="n">tsgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_guidance_start</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                <span class="c1"># check if grace period has elapsed, or if guidance has never been shown on the task (NaN value)</span>
                <span class="k">return</span> <span class="n">tsgs</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="ow">or</span> <span class="n">tsgs</span> <span class="o">!=</span> <span class="n">tsgs</span>

            <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span> <span class="k">if</span> <span class="n">_grace_met</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">==</span> <span class="s2">&quot;guidance_any&quot;</span><span class="p">:</span>
            <span class="c1"># how long since guidance was last shown on any task?</span>
            <span class="n">tsgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_guidance_start</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tsgs</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="ow">or</span> <span class="n">tsgs</span> <span class="o">!=</span> <span class="n">tsgs</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">tasks</span>  <span class="c1"># guidance has not been shown recently</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># a task has recently had guidance shown, we should not show guidance for any task yet</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">==</span> <span class="s2">&quot;attention&quot;</span><span class="p">:</span>

            <span class="k">def</span> <span class="nf">_grace_met</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
                <span class="n">tsgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_last_attended</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                <span class="c1"># check if grace period has elapsed, or if guidance has never been shown on the task (NaN value)</span>
                <span class="k">return</span> <span class="n">tsgs</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="ow">or</span> <span class="n">tsgs</span> <span class="o">!=</span> <span class="n">tsgs</span>

            <span class="c1"># print({t: (_grace_met(t), self.time_since_last_attended(t)) for t in tasks})</span>
            <span class="c1"># how long since the user was last attending to a task?</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span> <span class="k">if</span> <span class="n">_grace_met</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">==</span> <span class="s2">&quot;failure&quot;</span><span class="p">:</span>
            <span class="c1"># how long has this task been in failure?</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">(</span>
                <span class="n">t</span>
                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_failure_start</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unknown grace mode: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span><span class="si">}</span><span class="s2">, must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">GRACE_ON</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">time_since_last_attended</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the time since the user was last attending to a task.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cycle_start</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">beliefs</span><span class="p">[</span><span class="n">task</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;last_attended&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_attending_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the set of tasks that the user is currently attending to - this is typically only one task.</span>

<span class="sd">        Returns:</span>
<span class="sd">            set[str]: set of tasks that the user is currently attending to (empty if no tasks are being attended to).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="o">==</span> <span class="s2">&quot;fixation&quot;</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attending_task_fixation</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="o">==</span> <span class="s2">&quot;gaze&quot;</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attending_task_gaze</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="o">==</span> <span class="s2">&quot;mouse&quot;</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attending_task_mouse</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown attention mode: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">([</span><span class="n">result</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">attending_task_mouse</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Use mouse position to determine which task the user is attending to.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_target</span>

    <span class="k">def</span> <span class="nf">attending_task_gaze</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Use gaze position (including saccades) to determine which task the user is attending to.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gaze_target</span>

    <span class="k">def</span> <span class="nf">attending_task_fixation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Use fixation to determine which task the user is attending to.&quot;&quot;&quot;</span>
        <span class="c1">#print(self.fixation_target)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixation_target</span>

    <span class="k">def</span> <span class="nf">break_tie</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tasks</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="s2">&quot;longest&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Break a tie on tasks that all met the criteria for displaying guiance.</span>

<span class="sd">        The tie is broken using the `method` argument:</span>
<span class="sd">        - &quot;random&quot; will randomly break the tie.</span>
<span class="sd">        - &quot;longest&quot; will choose the task that has been in failure for the longest.</span>

<span class="sd">        Args:</span>
<span class="sd">            tasks (Iterable[str]): tasks to break the tie, one of which will be returned.</span>
<span class="sd">            method (Literal[&quot;random&quot;, &quot;longest&quot;], optional): how to break ties if guidance may be shown on multiple tasks simultaneously. Defaults to &quot;random&quot;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the chosen task, or None if there are no tasks to choose from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">:</span>
            <span class="c1"># randomly break the tie</span>
            <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">tasks</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;longest&quot;</span><span class="p">:</span>
            <span class="c1"># choose the task longest in failure</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span>
                <span class="p">[(</span><span class="n">task</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_failure_start</span><span class="p">(</span><span class="n">task</span><span class="p">))</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">],</span>
                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unknown guidance tie break method: </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">, must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">BREAK_TIES</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="nd">@observe</span><span class="p">([</span><span class="n">EyeMotionEvent</span><span class="p">,</span> <span class="n">MouseMotionEvent</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">_on_motion_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">MouseMotionEvent</span> <span class="o">|</span> <span class="n">EyeMotionEvent</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;It may be useful to the actuators to get these events. It is a trick to forward sensory input to the agents actuators. The `ArrowGuidanceActuator` is an example that requires this information to display the array at the gaze/mouse position.&quot;&quot;&quot;</span>
        <span class="c1"># TODO we may need to guard against actuators executing these actions...?</span>
        <span class="c1"># manually attempt the event, we could specify which actuators need this information...?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attempt</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_acceptable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># noqa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log_info</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;acceptable&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">on_acceptable</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_unacceptable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># noqa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log_info</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;acceptable&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">on_unacceptable</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_log_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">ok</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log info related to a task to the console.&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="s2">&quot;task </span><span class="si">%20s</span><span class="s2"> </span><span class="si">%20s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;✘&quot;</span><span class="p">,</span> <span class="s2">&quot;✔&quot;</span><span class="p">][</span><span class="nb">int</span><span class="p">(</span><span class="n">ok</span><span class="p">)])</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.DefaultGuidanceAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">sensors</span><span class="p">,</span> <span class="n">actuators</span><span class="p">,</span> <span class="n">break_ties</span><span class="o">=</span><span class="s1">&#39;random&#39;</span><span class="p">,</span> <span class="n">grace_mode</span><span class="o">=</span><span class="s1">&#39;failure&#39;</span><span class="p">,</span> <span class="n">attention_mode</span><span class="o">=</span><span class="s1">&#39;fixation&#39;</span><span class="p">,</span> <span class="n">grace_period</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">counter_factual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Constructor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>sensors</code></td>
            <td>
                  <code>list[<span title="star_ray.agent.Sensor">Sensor</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of sensors, this will typically be a list of <code>icua.agent.TaskAcceptabilitySensor</code>s. A <code>UserInputSensor</code> will always be added automatically.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>actuators</code></td>
            <td>
                  <code>list[<span title="star_ray.agent.Actuator">Actuator</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of actuators, this will typically contain actuators that are capable of providing visual feedback to a user, see e.g. <code>icua.agent.GuidanceActuator</code> and its concrete implementations. A <code>CounterFactualGuidanceActuator</code> will be added by default.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>break_ties</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;random&#39;, &#39;longest&#39;, &#39;since&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>how to break ties if guidance may be shown on multiple tasks simultaneously. Defaults to "random". "random" will randomly break the tie, "longest" will choose the task that has been in failure for the longest, "since" will choose the task that has not had guidance shown for the longest time.</p>
              </div>
            </td>
            <td>
                  <code>&#39;random&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>grace_mode</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;guidance_task&#39;, &#39;guidance_any&#39;, &#39;failure&#39;, &#39;attention&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>how to track the grace period. "guidance_task" will track the time since guidance was last shown on the task, "guidance_any" will track the time since guidance was last shown on any task, "failure" will track the time since the last failure on the task, "attention" will track the time since the user was last attending to a task. Defaults to "failure".</p>
              </div>
            </td>
            <td>
                  <code>&#39;failure&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>attention_mode</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;fixation&#39;, &#39;gaze&#39;, &#39;mouse&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>method of determining where the user is attending. "fixation" will use the most recent gaze fixation, "gaze" will use the gaze position (including saccades), "mouse" will use the current mouse position. Defaults to "fixation".</p>
              </div>
            </td>
            <td>
                  <code>&#39;fixation&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>grace_period</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the time to wait (seconds) before guidance may be shown for a task after the last time guidance was shown on the task. Defaults to 3.0 seconds.</p>
              </div>
            </td>
            <td>
                  <code>3.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>counter_factual</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>whether guidance should be shown to the user, or whether it should just be logged.  This allows counter-factual experiments to be run, we can track when guidance would have been shown, and compare the when it was actually shown (in a different run). Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kwargs</code></td>
            <td>
                  <code>dict[str, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional optional keyword arguments.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sensors</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Sensor</span><span class="p">],</span>
    <span class="n">actuators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Actuator</span><span class="p">],</span>
    <span class="n">break_ties</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="s2">&quot;longest&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
    <span class="n">grace_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
        <span class="s2">&quot;guidance_task&quot;</span><span class="p">,</span> <span class="s2">&quot;guidance_any&quot;</span><span class="p">,</span> <span class="s2">&quot;failure&quot;</span><span class="p">,</span> <span class="s2">&quot;attention&quot;</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;failure&quot;</span><span class="p">,</span>
    <span class="n">attention_mode</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;fixation&quot;</span><span class="p">,</span> <span class="s2">&quot;gaze&quot;</span><span class="p">,</span> <span class="s2">&quot;mouse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;fixation&quot;</span><span class="p">,</span>
    <span class="n">grace_period</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
    <span class="n">counter_factual</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">    Args:</span>
<span class="sd">        sensors (list[Sensor]): list of sensors, this will typically be a list of `icua.agent.TaskAcceptabilitySensor`s. A `UserInputSensor` will always be added automatically.</span>
<span class="sd">        actuators (list[Actuator]): list of actuators, this will typically contain actuators that are capable of providing visual feedback to a user, see e.g. `icua.agent.GuidanceActuator` and its concrete implementations. A `CounterFactualGuidanceActuator` will be added by default.</span>
<span class="sd">        break_ties (Literal[&quot;random&quot;, &quot;longest&quot;, &quot;since&quot;], optional): how to break ties if guidance may be shown on multiple tasks simultaneously. Defaults to &quot;random&quot;. &quot;random&quot; will randomly break the tie, &quot;longest&quot; will choose the task that has been in failure for the longest, &quot;since&quot; will choose the task that has not had guidance shown for the longest time.</span>
<span class="sd">        grace_mode (Literal[&quot;guidance_task&quot;, &quot;guidance_any&quot;, &quot;failure&quot;, &quot;attention&quot;], optional): how to track the grace period. &quot;guidance_task&quot; will track the time since guidance was last shown on the task, &quot;guidance_any&quot; will track the time since guidance was last shown on any task, &quot;failure&quot; will track the time since the last failure on the task, &quot;attention&quot; will track the time since the user was last attending to a task. Defaults to &quot;failure&quot;.</span>
<span class="sd">        attention_mode (Literal[&quot;fixation&quot;, &quot;gaze&quot;, &quot;mouse&quot;], optional): method of determining where the user is attending. &quot;fixation&quot; will use the most recent gaze fixation, &quot;gaze&quot; will use the gaze position (including saccades), &quot;mouse&quot; will use the current mouse position. Defaults to &quot;fixation&quot;.</span>
<span class="sd">        grace_period (float, optional): the time to wait (seconds) before guidance may be shown for a task after the last time guidance was shown on the task. Defaults to 3.0 seconds.</span>
<span class="sd">        counter_factual (bool, optional): whether guidance should be shown to the user, or whether it should just be logged.  This allows counter-factual experiments to be run, we can track when guidance would have been shown, and compare the when it was actually shown (in a different run). Defaults to False.</span>
<span class="sd">        kwargs (dict[str,Any]): Additional optional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)),</span>
        <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">actuators</span><span class="p">)),</span>
        <span class="n">counter_factual</span><span class="o">=</span><span class="n">counter_factual</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="o">=</span> <span class="n">attention_mode</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">ATTENTION_MODES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid argument: `attention_mode` </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span><span class="si">}</span><span class="s2"> must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">ATTENTION_MODES</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">=</span> <span class="n">grace_mode</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">GRACE_ON</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid argument: `grace_mode` </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span><span class="si">}</span><span class="s2"> must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">GRACE_ON</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_break_ties</span> <span class="o">=</span> <span class="n">break_ties</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_break_ties</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">BREAK_TIES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid argument: `break_ties` </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_break_ties</span><span class="si">}</span><span class="s2"> must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">BREAK_TIES</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="o">=</span> <span class="n">grace_period</span>  <span class="c1"># TODO</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid argument: `grace_period` </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span><span class="si">}</span><span class="s2"> must be &gt; 0 &quot;</span>
        <span class="p">)</span>

    <span class="c1"># used to track the tasks that the user is currently attending to</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_attending_tasks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_fixation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">attending_task_fixation</span><span class="p">()</span></code>

<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_fixation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Use fixation to determine which task the user is attending to.</p>

            <details class="quote">
              <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">attending_task_fixation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use fixation to determine which task the user is attending to.&quot;&quot;&quot;</span>
    <span class="c1">#print(self.fixation_target)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixation_target</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_gaze" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">attending_task_gaze</span><span class="p">()</span></code>

<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_gaze" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Use gaze position (including saccades) to determine which task the user is attending to.</p>

            <details class="quote">
              <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">attending_task_gaze</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use gaze position (including saccades) to determine which task the user is attending to.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gaze_target</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_mouse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">attending_task_mouse</span><span class="p">()</span></code>

<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.attending_task_mouse" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Use mouse position to determine which task the user is attending to.</p>

            <details class="quote">
              <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">attending_task_mouse</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use mouse position to determine which task the user is attending to.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_target</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.DefaultGuidanceAgent.break_tie" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">break_tie</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;random&#39;</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.break_tie" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Break a tie on tasks that all met the criteria for displaying guiance.</p>
<p>The tie is broken using the <code>method</code> argument:
- "random" will randomly break the tie.
- "longest" will choose the task that has been in failure for the longest.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>tasks</code></td>
            <td>
                  <code><span title="collections.abc.Iterable">Iterable</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tasks to break the tie, one of which will be returned.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>method</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;random&#39;, &#39;longest&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>how to break ties if guidance may be shown on multiple tasks simultaneously. Defaults to "random".</p>
              </div>
            </td>
            <td>
                  <code>&#39;random&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the chosen task, or None if there are no tasks to choose from.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">break_tie</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tasks</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="s2">&quot;longest&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Break a tie on tasks that all met the criteria for displaying guiance.</span>

<span class="sd">    The tie is broken using the `method` argument:</span>
<span class="sd">    - &quot;random&quot; will randomly break the tie.</span>
<span class="sd">    - &quot;longest&quot; will choose the task that has been in failure for the longest.</span>

<span class="sd">    Args:</span>
<span class="sd">        tasks (Iterable[str]): tasks to break the tie, one of which will be returned.</span>
<span class="sd">        method (Literal[&quot;random&quot;, &quot;longest&quot;], optional): how to break ties if guidance may be shown on multiple tasks simultaneously. Defaults to &quot;random&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the chosen task, or None if there are no tasks to choose from.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">:</span>
        <span class="c1"># randomly break the tie</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">tasks</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;longest&quot;</span><span class="p">:</span>
        <span class="c1"># choose the task longest in failure</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span>
            <span class="p">[(</span><span class="n">task</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_failure_start</span><span class="p">(</span><span class="n">task</span><span class="p">))</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">],</span>
            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unknown guidance tie break method: </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">, must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">BREAK_TIES</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.DefaultGuidanceAgent.get_attending_tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_attending_tasks</span><span class="p">()</span></code>

<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.get_attending_tasks" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Get the set of tasks that the user is currently attending to - this is typically only one task.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>set[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>set[str]: set of tasks that the user is currently attending to (empty if no tasks are being attended to).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_attending_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the set of tasks that the user is currently attending to - this is typically only one task.</span>

<span class="sd">    Returns:</span>
<span class="sd">        set[str]: set of tasks that the user is currently attending to (empty if no tasks are being attended to).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="o">==</span> <span class="s2">&quot;fixation&quot;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attending_task_fixation</span><span class="p">()</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="o">==</span> <span class="s2">&quot;gaze&quot;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attending_task_gaze</span><span class="p">()</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span> <span class="o">==</span> <span class="s2">&quot;mouse&quot;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attending_task_mouse</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown attention mode: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_attention_mode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">([</span><span class="n">result</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.DefaultGuidanceAgent.grace_period_over" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">grace_period_over</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.grace_period_over" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Get the set of (unacceptable) tasks that have had their grace period elapse.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>tasks</code></td>
            <td>
                  <code>set[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the set of tasks to check.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>set[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>set[str]: the set of tasks that have had their grace period elapse.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">grace_period_over</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the set of (unacceptable) tasks that have had their grace period elapse.</span>

<span class="sd">    Args:</span>
<span class="sd">        tasks (set[str]): the set of tasks to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        set[str]: the set of tasks that have had their grace period elapse.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">==</span> <span class="s2">&quot;guidance_task&quot;</span><span class="p">:</span>
        <span class="c1"># how long since guidance was last shown on the task?</span>
        <span class="k">def</span> <span class="nf">_grace_met</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
            <span class="n">tsgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_guidance_start</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="c1"># check if grace period has elapsed, or if guidance has never been shown on the task (NaN value)</span>
            <span class="k">return</span> <span class="n">tsgs</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="ow">or</span> <span class="n">tsgs</span> <span class="o">!=</span> <span class="n">tsgs</span>

        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span> <span class="k">if</span> <span class="n">_grace_met</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">==</span> <span class="s2">&quot;guidance_any&quot;</span><span class="p">:</span>
        <span class="c1"># how long since guidance was last shown on any task?</span>
        <span class="n">tsgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_guidance_start</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tsgs</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="ow">or</span> <span class="n">tsgs</span> <span class="o">!=</span> <span class="n">tsgs</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tasks</span>  <span class="c1"># guidance has not been shown recently</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># a task has recently had guidance shown, we should not show guidance for any task yet</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">==</span> <span class="s2">&quot;attention&quot;</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">_grace_met</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
            <span class="n">tsgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_last_attended</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="c1"># check if grace period has elapsed, or if guidance has never been shown on the task (NaN value)</span>
            <span class="k">return</span> <span class="n">tsgs</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span> <span class="ow">or</span> <span class="n">tsgs</span> <span class="o">!=</span> <span class="n">tsgs</span>

        <span class="c1"># print({t: (_grace_met(t), self.time_since_last_attended(t)) for t in tasks})</span>
        <span class="c1"># how long since the user was last attending to a task?</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span> <span class="k">if</span> <span class="n">_grace_met</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span> <span class="o">==</span> <span class="s2">&quot;failure&quot;</span><span class="p">:</span>
        <span class="c1"># how long has this task been in failure?</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span>
            <span class="n">t</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_since_failure_start</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grace_period</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unknown grace mode: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_grace_mode</span><span class="si">}</span><span class="s2">, must be one of </span><span class="si">{</span><span class="n">DefaultGuidanceAgent</span><span class="o">.</span><span class="n">GRACE_ON</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.DefaultGuidanceAgent.on_attending" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_attending</span><span class="p">(</span><span class="n">attending_tasks</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.on_attending" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Called when the user's attention changes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>attending_tasks</code></td>
            <td>
                  <code>set[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the new set of tasks that the user is currently attending to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">on_attending</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attending_tasks</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Called when the user&#39;s attention changes.</span>

<span class="sd">    Args:</span>
<span class="sd">        attending_tasks (set[str]): the new set of tasks that the user is currently attending to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">attending_tasks</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beliefs</span><span class="p">[</span><span class="n">task</span><span class="p">][</span><span class="s2">&quot;last_attended&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cycle_start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log_info</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s2">&quot;attending&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attending_tasks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log_info</span><span class="p">(</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="s2">&quot;attending&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="matbii.guidance.agent_default.DefaultGuidanceAgent.time_since_last_attended" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">time_since_last_attended</span><span class="p">(</span><span class="n">task</span><span class="p">)</span></code>

<a href="#matbii.guidance.agent_default.DefaultGuidanceAgent.time_since_last_attended" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Get the time since the user was last attending to a task.</p>

            <details class="quote">
              <summary>Source code in <code>matbii\guidance\agent_default.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">time_since_last_attended</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the time since the user was last attending to a task.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cycle_start</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">beliefs</span><span class="p">[</span><span class="n">task</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;last_attended&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../agent_base/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Agent base">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Agent base
              </div>
            </div>
          </a>
        
        
          
          <a href="../sensor_guidance/" class="md-footer__link md-footer__link--next" aria-label="Next: Sensor guidance">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Sensor guidance
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.footer", "navigation.expand", "navigation.tabs", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>